# 데이터 쿼리
   MongoDB의 가장 큰 강점 중 하나는 테이블 대신 BSON 문서를 필터링하고 리턴하지만 기존의 관계형 데이터베이스와 거의 같은 방식으로 작동하는 임시 쿼리를 강력하게 지원한다.
   이러한 방식이 SQL 개발자들이 이해하는 데 어려울 수도 있는 다른 문서 저장소와 MongoDB의 차이점이다. MongoDB를 사용하면 비교적 복잡한 SQL 쿼리를 Javascript 함수 호출로 쉽게 변환할 수 있다.

#
### find(), findOne() 메소드  
     ① find() 
        파라미터 내부의 조건을 만족하는 문서를 쿼리한다. 만약 파라미터에 아무 값도 대입하지 않을 경우, 컬렉션 내부에 있는 모든 문서를 만들어진 순서를 기준으로 차례대로 반환한다.

	.pretty() 메소드는 find() 메소드 뒤에서만 추가적으로 함께 사용할 수 있는 함수로 쿼리한 문서를 들여쓰기를 하여 보기 좋게 정렬한 형태로 출력하게 해준다. 

     ② findOne()
        파라미터 내부 조건을 만족하는 "하나의" 문서를 쿼리한다. find() 명령어에 구체적인 파라미터의 값을 대입하여 문서를 쿼리하였는데 그 조건을 만족하는 문서가 하나이면 findOne() 명령어에 같은 파라미터를 대입하여 쿼리한 경우나 다른 점은 없다. 조건을 만족하는 문서가 두 개 이상일 경우 제일 먼저 생성된 하나의 문서만을 반환한다. 만약 파라미터를 대입하지 않은 경우 같은 방식으로 전체 문서에서 가장 처음 만들어 하나의 문서가 반환된다.

     ③ forEach(printjson)
        find() 함수는 쿼리 결과 세트에 커서를 리턴하며, 이 경우에는 모든 문서를 검색한다. 이것을 변수에 지정하지 않거나 더 이상의 함수가 수행되지 않으면 기본적으로 샘플 결과 세트가 화면에 표시된다.
	
	>db.alphabet.find().forEach(printjson);

        명령을 사용하여 모든 결과 세트를 표시할 수도 있다.

#
### 조건을 이용한 쿼리
     몽고 DB 에서는 범위, AND 절, OR 절, 부동(negation)조건 등을 적용하여 더욱 효과적인 쿼리문을 만들 수 있다. 

     * 조건부 연산자
     - $lt : 미만
     - $lte : 이하 
     - $gt : 초과
     - $gte : 이상
     - $all : 배열에 있는 모든 값과 일치
     - $exists : 필드의 존재 여부 확인
     - $mod : 모듈
     - $ne : 같지 않음
     - $in : 배열에 있는 하나 이상의 값과 일치
     - $nin : 배열에 있는 0 값과 일치
     - $or : 쿼리 중 하나와 일치
     - $nor : 쿼리 중 어느 것과도 일치하지 않음
     - $size : 정의된 요소 수가 있는 배열과 일치
     - $type : 지정된 BSON 데이터 유형의 값과 일치
     - $not : 같지 않음

     http://www.tutorialspoint.com/mongodb/mongodb_query_document.htm

     ① 대소 비교 조건
       "$lt", "$lte", "$gt", "$gte"는 각각 '<', '<=', '>', '>='에 해당하는 비교 연산자들이다. 이 연산자들을 조합하면 범위를 만들어 원하는 값을 쿼리할 수 있다.
       그 외에 'not equal'을 나타내는 '$ne' 연산자도 있다.

     ② 'AND'와 'OR' 조건
      다른 언어와 동일한 개념의 'AND'와 'OR' 연산을 제공한다. 쿼리를 하기 위해 find() 메소드에 파라미터를 채우는 과정에서, 조건을 두 개 이상 대입할시 논리적 관계를 설정할 때 활용할 수 있다.
 
      - AND 예
      > db.mycoll.find( {"subject2" : "C++ programing", "subject3" : "JAVA"} )

      - OR 예
      > db.mycoll.find( {"$or" : [{"subject2" : "C++ programing"}, {"subject3" : "JAVA"}]} )

#
### 배열에서의 쿼리
     배열의 요소에 대한 쿼리의 가장 기본은 배열의 각 요소를 해당 필드의 유일한 값인 것처럼 다룬다. 배열들의 값 중 하나만을 이용해 쿼리문을 만들어도 해당  필드의 유일한 값으로 인정하고 필드가 속한 문서에 대한 정보를 가져온다.(배열이라고 해서 배열의 모든 값들을 언급하며 쿼리 하지 않는다는 의미이다.)

     ① '$all' 연산자
       배열 내 "하나 이상의 요소가 일치하는 배열"을 찾을 시 사용한다.

     ② $size 연산자
       $size 연산자는 주어진 배열의 크기를 반환하는 연산자이다.

#
### $where 쿼리 
     find()와 findOne() 메소드의 파라미터 내부를 잘 표현하는 것 만으로도 다채로운 쿼리를 할 수 있었지만, 명확하게 표현하기 힘든 상황은 쿼리하기가 힘들어 진다. 이런 상황을 위해 몽고 DB 에서는 '$where' 절 쿼리를 지원한다. 일반적인 방법으로는 표현할 수 없는 쿼리들은 임의의 자바스크립트를 쿼리의 일부분으로 실행할 수 있는 '$where' 절을 사용함으로써 쿼리할 수 있다.

#
### 커서
     데이터베이스는 커서를 활용하여 find() 메소드의 결과를 반환한다. 일반적으로 클라이언트 쪽의 커서 구현체들은 쿼리의 최종 결과에 대해 강력한 제어권을 제공하게 되는데, 예를 들면, 결과의 수를 제한한다거나, 결과 중 몇 개를 건너 뛰거나, 여러 키의 조합으로 어떤 방향으로라도 정렬할 수 있게 하거나, 그 외 수많은 조작을 수행할 수 있게 한다.
     
