# Apache Spark 
- In-memory Analytics 프로세스 
- 인메모리 기반 분산 고성능 클러스터 플랫폼 
- 기존 하둡의 맵리듀스 작업을 디스크 기반이 아닌 메모리 기반으로 옮겨서 고속화 
- 빅데이터 클러스터 환경에서 데이터를 병렬 처리하며, 빠른 계산을 위해 설계됨 

#
### 기본 데이터 구조 
**RDD** 
- Resilient Distributed Dataset 
- 탄력적이며 분산된 데이터셋 
- 오류 자동복구 기능이 포함된 가상의 리스트 
- 클러스터에서 데이터를 처리 
- 다양한 계산을 수행할 수 있으며, 메모리에 저장함 (map, reduce, count, filter, join) 
- 작업을 병렬적으로 처리 
- 여러 작업을 설정한 후, 결과를 얻을 때 lazy하게 
- Lineage : 클러스터 중 일부 고장으로 작업이 실패해도 리니지를 통해 데이터 복구 

#
### 특징 
**Speed**
- Hadoop 클러스터에서 애플리케이션을 실행할 수 있도록 도와줌 
- 메모리에서 실행 시 최대 100배, 디스크에서 실행 시 최대 10배 빠름 
- 중간 처리 데이터를 메모리에 저장 
#
**여러 언어 지원**
- Scala 기반으로 개발되었지만 그 외의 언어도 사용 가능   
  ** Scala : 객체 지향 프로그래밍 언어 + 함수형 프로그래밍 요소의 결합된 다중패러다임 프로그래밍 언어 / Scalable Language에서 유래 
- Java, R, SQL, Python 
- 대화식 쿼리를 이해 80개의 고급 연산자 제공 
- 데이터 분석가, 엔지니어, 과학자, 프로그래밍 개발자 등 모두에게 확장 가능하고 유연한 환경을 제공함 
- 언어별 성능은 Spark 버전이 상향되면서 상당 부분 개선되어 사용에 용이함 
#
**고급 분석**
- Map과 Reduce를 지원할 뿐만 아니라, SQL 쿼리, 스트리밍 데이터, 기계 학습 및 그래프 알고리즘 지원 
#
**다양한 데이터 연결 가능** 
- Hadoop
* Hbase & Cassandra (NoSQL Database)   
 
  * Hbase 
  
    * 하둡 플랫폼을 위한 비관계형 분산 데이터베이스 
    * 분산 파일 시스템인 HDFS 위에서 동작 
    * HDFS의 데이터에 대한 실시간 임의 읽기/쓰기 기능 제공 
    
  * Cassandra 
  
    * 자유-오픈 소스 분산형 데이터베이스 관리 시스템 
    * 단일 장애점 없이 고성능을 제공하면서, 수많은 서버 간의 대용량 데이터를 관리하기 위해 설계됨 
    
* Mesos (클라우드 환경, 클러스터 관리) 
  * 컴퓨터 클러스터를 관리하기 위한 오픈 소스 프로젝트 
  
#

### 구성요소 
**Apache Spark Core**
- 다른 모든 기능들이 구축된, 스파크 플랫폼을 위한 기초적 실행 엔진 
- 메모리 내 컴퓨팅과 외부 스토리지 시스템의 데이터셋을 참조 

**Spark SQL**
- 스파크 코어의 상단에 있는 컴포넌트 
- SchemaRDD 라고 하는 새로운 데이터 추상화 도입 
- 구조화 및 반구조화 데이터 지원 

**Spark Streaming**
- 스파크 코어의 빠른 스케줄링 기능을 활용하여 스트리밍 분석을 수행 
- 미니 베이스로 데이터를 수집하여 RDD 변환 실시 

**MLlib** 
- 스파크 위에 분산된 기계 학습 프레임워크 

**GraphX**
- 스파크 상단에 분산된 그래프 처리 프레임워크 
- Pregel 추상화 API를 이용하여 사용자 정의 그래프를 모델링할 수 있는 그래프 연산을 표현하기 위한 API 제공 
- 추상화를 위한 최적화된 런타임 제공 

#
### 배치 방법
**독립형 배치**
- 스파크가 HDFS의 상단에 위치하며, 명시적으로 HDFS에 공간이 할당된다는 것 
- 스파크와 맵리듀스는 클러스터의 모든 스파크 작업을 처리하기 위해 나란히 달림 

**Hadoop Yarn 전개**
- 단순히 어떠한 사전 설치나 루트 액세스 없이 Yarn에서 스파크가 발생하는 것 
- 스파크를 하둡 생태계나 하둡 스택으로 통합하는데 도움됨 
- 다른 요소들이 스택 위에서 작동할 수 있게 해줌 

**MapReduce (SIMR)의 스파크**
- 독립형 배치 외에 스파크 작업을 시작하는데 사용 
- SIMR을 사용하면, 사용자는 스파크를 실행할 수 있고 관리상의 접근 없이 쉘을 사용할 수 있음



